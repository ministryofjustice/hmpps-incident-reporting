{% from "moj/components/date-picker/macro.njk" import mojDatePicker %}

{% macro renderDateField(fieldName, field, options, values, errors) %}

  {% set visuallyHiddenText %}
    {% if field.visuallyHiddenText %}
      <span class="govuk-visually-hidden">
        {{ field.visuallyHiddenText }}
      </span>
    {% endif %}
  {% endset %}

  {{ mojDatePicker({
    name: fieldName,
    id: fieldName,
    label: {
      html: field.label + visuallyHiddenText,
      attributes: {
        id: fieldName + "__label"
      }
    },
    hint: { text: field.hint } if field.hint else undefined,
    maxDate: now() | shortDate,
    value: values[fieldName],
    errorMessage: { text: errors[fieldName].message } if errors[fieldName] else undefined
  }) }}

{% endmacro %}
