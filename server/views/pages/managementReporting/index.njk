{% extends "partials/layout.njk" %}

{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}
{% from "macros/dpsCard/renderDpsCard.njk" import renderDpsCard %}
{% from "macros/dpsCard/renderDpsCards.njk" import renderDpsCards %}

{% set pageTitle = "Management reporting" %}

{% block beforeContent %}
  {{ super() }}

  {{ govukBreadcrumbs({
    items: [
      {
        text: "Digital Prison Services",
        href: dpsUrl
      },
      {
        text: "Incident reporting",
        href: "/"
      }
    ]
  }) }}
{% endblock %}

{% block content %}
  <h1 class="govuk-heading-l">Management reporting</h1>

  {% for definition in definitions %}
    {% if definition.authorised %}
      <h2 class="govuk-heading-m">{{ definition.name }}</h2>
      <p>{{ definition.description }}</p>

      {% call renderDpsCards() %}
        {% for variant in definition.variants %}
          {{ renderDpsCard({
            id: definition.id + "-" + variant.id,
            heading: variant.name,
            description: variant.description,
            href: "/management-reporting/" + definition.id + "-" + variant.id
          }) }}
        {% endfor %}
      {% endcall %}
    {% endif %}
  {% endfor %}
{% endblock %}
